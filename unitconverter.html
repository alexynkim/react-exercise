<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body> 
    <div id="root"></div>
    <script src="https://unpkg.com/react@17.0.2/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>

    <script type="text/babel">
    
        const root = document.querySelector('#root');
      
        function TEMPERATURE() {
            const [currVal, setValue] = React.useState([-1,-1]); // [celsius, fahrenheit]
            const [focusing, setFocusing] = React.useState(0);

            const onChangeCelsius = (e) => {
                const fahrenheit = e.target.value * 9/5 + 32;

                setValue([e.target.value,fahrenheit]);
            };
            const onChangeFahrenheit = (e) => {
                const celsius = (e.target.value - 32) * 5/9;

                setValue([celsius,e.target.value]);
            };
            const setRef = (e) => {
                if(e) e.focus();
            }
            const onClickReset = () => {
                setValue([-1,-1]);
            };
            const onClickNext = () => {
                //Change current input state to next state
                onClickReset();
                setFocusing((focusing+1)%2);
            };
            
            return (
                <div>
                    <h3>Temperature Converter</h3>
                    <div>
                        <label htmlFor="celsius">Celsius:</label>
                        <input 
                            value={currVal[0]==-1 ? "" : currVal[0]}
                            type="number" min="-9999"
                            id="celsius" 
                            ref={setRef}
                            disabled={focusing!=0}
                            onChange={onChangeCelsius}/>
                        <h4>{'>'} Celsius : {currVal[0]==-1 ? "": currVal[0]+'°C'}</h4>
                    </div>
                    <div>
                        <label htmlFor="fahrenheit">Fahrenheit:</label>
                        <input 
                            value={currVal[1]==-1 ? "" : currVal[1]}
                            type="number" min="-9999"
                            id="fahrenheit"
                            ref={setRef}
                            disabled={focusing!=1}
                            onChange={onChangeFahrenheit}/>
                        <h4>{'>'} Fahrenheit : {currVal[1]==-1 ? "": currVal[1]+'°F'}</h4>
                    </div>
                    <button onClick={onClickReset}>Reset</button>
                    <button onClick={onClickNext}>Next</button>
                </div>
            );
        }

        function WEIGHT() {
            const [currVal, setValue] = React.useState([-1,-1]); 
            const [focusing, setFocusing] = React.useState(0);

            const onChangeKg = (e) => {
                const lb = e.target.value * 2.20462;

                setValue([e.target.value,lb]);
            };
            const onChangeLb = (e) => {
                const kg = e.target.value / 2.20462;

                setValue([kg,e.target.value]);
            };
            const setRef = (e) => {
                if(e) e.focus();
            }
            const onClickReset = () => {
                currVal[0] = currVal[1] = -1;
                setValue([-1,-1]);
            };
            const onClickNext = () => {
                //Change current input state to next state
                onClickReset();
                setFocusing((focusing+1)%2);
            };
            
            return (
                <div>
                    <h3>Weight Converter</h3>
                    <div>
                        <label htmlFor="kg">Kilograms:</label>
                        <input 
                            value={currVal[0]==-1 ? "" : currVal[0]}
                            type="number" 
                            id="kg" 
                            ref={setRef}
                            disabled={focusing!=0}
                            onChange={onChangeKg}/>
                        <h4>{'>'} Kilograms : {currVal[0]==-1 ? "": currVal[0]+'kg'}</h4>
                    </div>
                    <div>
                        <label htmlFor="lb">Pounds:</label>
                        <input 
                            value={currVal[1]==-1 ? "" : currVal[1]}
                            type="number" 
                            id="lb"
                            ref={setRef}
                            disabled={focusing!=1}
                            onChange={onChangeLb}/>
                        <h4>{'>'} Pounds : {currVal[1]==-1 ? "": currVal[1]+'lb'}</h4>
                    </div>
                    <button onClick={onClickReset}>Reset</button>
                    <button onClick={onClickNext}>Next</button>
                </div>
            );

        }

        function DISTANCE() {
            const [currVal, setValue] = React.useState([-1,-1, -1]); // [km, mile, feet]
            const [focusing, setFocusing] = React.useState(0);

            const onChangeKm = (e) => {
                const mile = e.target.value * 0.621371;
                const feet = e.target.value * 3280.84;

                setValue([e.target.value,mile, feet]);
            };
            const onChangeMile = (e) => {
                const km = e.target.value / 0.621371;
                const feet = e.target.value * 5280;

                setValue([km,e.target.value, feet]);
            };
            const onChangeFeet = (e) => {
                const km = e.target.value / 3280.84;
                const mile = e.target.value / 5280;

                setValue([km,mile, e.target.value]);
            };
            const setRef = (e) => {
                if(e) e.focus();
            }
            const onClickReset = () => {
                setValue([-1,-1,-1]);
            };
            const onClickNext = () => {
                //Change current input state to next state
                onClickReset();
                setFocusing((focusing+1)%3);
            };
            
            return (
                <div>
                    <h3>Distance Converter</h3>
                    <div>
                        <label htmlFor="km">Kilometers:</label>
                        <input 
                            value={currVal[0]==-1 ? "" : currVal[0]}
                            type="number" 
                            id="km" 
                            ref={setRef}
                            disabled={focusing!=0}
                            onChange={onChangeKm}/>
                        <h4>{'>'} Kilometers : {currVal[0]==-1 ? "": currVal[0]+'km'}</h4>
                    </div>
                    <div>
                        <label htmlFor="miles">Miles:</label>
                        <input 
                            value={currVal[1]==-1 ? "" : currVal[1]}
                            type="number" 
                            id="miles"
                            ref={setRef}
                            disabled={focusing!=1}
                            onChange={onChangeMile}/>
                        <h4>{'>'} Miles : {currVal[1]==-1 ? "": currVal[1]+'miles'}</h4>
                    </div>
                    <div>
                        <label htmlFor="feet">Feet:</label>
                        <input 
                            value={currVal[2]==-1 ? "" : currVal[2]}
                            type="number" 
                            id="feet"
                            ref={setRef}
                            disabled={focusing!=2}
                            onChange={onChangeFeet}/>
                        <h4>{'>'} Feet : {currVal[2]==-1 ? "": currVal[2]+'feet'}</h4>
                    </div>
                    <button onClick={onClickReset}>Reset</button>
                    <button onClick={onClickNext}>Next</button>
                </div>
            );
        }

        function TIME() {
            const [currVal, setValue] = React.useState({"T":[-1,-1,-1], "R":[0,0]}); // T[hour, min, sec] R[min, sec]
            const [focusing, setFocusing] = React.useState(2);

            const onChangeSec = (e) => {
                const min = Math.floor((e.target.value / 60));
                const hour = Math.floor((min / 60));
                const newVal = {};

                newVal.R = [e.target.value%60, min%60];
                newVal.T = [hour, min, e.target.value];

                setValue((prev) => (newVal));
            };
            const onChangeMin = (e) => {
                const hour = Math.floor((e.target.value / 60));
                const sec = e.target.value * 60;
                const newVal = {};

                newVal.R = [e.target.value%60, 0];
                newVal.T = [hour, e.target.value, sec];
                
                setValue((prev) => (newVal));
            };
            const onChangeHour = (e) => {
                const min = e.target.value * 60;
                const sec = min * 60;
                const newVal = {};

                newVal.R = [0, 0];
                newVal.T = [e.target.value, min, sec];
                setValue((prev) => (newVal));
            };
            const setRef = (e) => {
                if(e) e.focus();
            }
            const onClickReset = () => {
                const newVal = {};
                newVal.T = [-1,-1,-1];
                newVal.R = [0,0];
                setValue((prev) => (newVal));
            };
            const onClickNext = () => {
                //Change current input state to next state
                onClickReset();
                setFocusing((focusing+1)%3);
            };
            
            return (
                <div>
                    <h3>Time Converter</h3>
                    <div>
                        <label htmlFor="seconds">Seconds:</label>
                        <input 
                            value={currVal.T[2]==-1 ? "" : currVal.T[2]}
                            type="number" 
                            id="seconds" 
                            ref={setRef}
                            disabled={focusing!=2}
                            onChange={onChangeSec}/>
                        <h4>{'>'} Total Seconds : {currVal.T[2]==-1 ? "": currVal.T[2]+'s'}</h4>
                    </div>
                    <div>
                        <label htmlFor="minutes">Minutes:</label>
                        <input 
                            value={currVal.T[1]==-1 ? "" : currVal.T[1]}
                            type="number" 
                            id="minutes"
                            ref={setRef}
                            disabled={focusing!=1}
                            onChange={onChangeMin}/>
                        <h4>{'>'} Total Minutes & Seconds : {currVal.T[1]==-1 ? "": currVal.T[1]+'m ' + currVal.R[1] + 's'}</h4>
                    </div>
                    <div>
                        <label htmlFor="hours">Hours:</label>
                        <input 
                            value={currVal.T[0]==-1 ? "" : currVal.T[0]}
                            type="number" 
                            id="hours"
                            ref={setRef}
                            disabled={focusing!=0}
                            onChange={onChangeHour}/>
                        <h4>{'>'} Total Hours, Minutes and Seconds : {currVal.T[0]==-1 ? "": currVal.T[0]+'h ' + currVal.R[0] + 'm ' + currVal.R[1] + 's'} </h4>
                    </div>
                    <button onClick={onClickReset}>Reset</button>
                    <button onClick={onClickNext}>Next</button>
                </div>
            );
        };

        function App() {
            const [visible, setVisible] = React.useState(0);

            const onSelectChange = (e) => {
                console.log((typeof visible), visible, e.target.value);
                setVisible((prev) => {
                    return parseInt(e.target.value);
                });
            };

            return (
                <div>
                    <h1>Super Converter</h1>
                    <select onChange={onSelectChange}>
                        <option value="0">Temperature</option>
                        <option value="1">Weight</option>
                        <option value="2">Distance</option>
                        <option value="3">Time</option>
                    </select>
                    <hr/>
                    {(visible==0) && <TEMPERATURE/>}
                    {(visible==1) && <WEIGHT/>}
                    {(visible==2) && <DISTANCE/>}
                    {(visible==3) && <TIME/>}
                </div>
            );
        };
        ReactDOM.render(<App/>, root);
    </script>
</body>
</html>
